<html>
<head>
<title>Nomic</title>

<style type="text/css">

#controls {
}

#controls img {
    display: inline;
    padding: 0 5px;
}

#tilemap {
    display: none;
}

.tilemap {
    display: none;
}

td.selected {
    color: red;
}
</style>

<link rel="stylesheet" type="text/css" href="http://127.0.0.1:8055/static/tipTip/tipTip.css" />

<script src='http://127.0.0.1:8080/socket.io/socket.io.js'></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="http://127.0.0.1:8055/static/tipTip/jquery.tipTip.js"></script>



</head>

<body>
<h1>
TEST

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a id="init" class="tip" title="Initialize game state" href="">INIT</a>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a id="start" class="tip" title="Start game" href="">START</a>

</h1>

<span id="map_editor">
</span>

<div id="game" >

<span id="controls">
<a id="button" class="increase_cell_size" href="">
    <img src="static/buttons/increase_cell_size.png" />
</a>
<a id="button" class="decrease_cell_size" href="">
    <img src="static/buttons/decrease_cell_size.png" />
</a>
</span>

<canvas id ="DrawingCacheWorkspace" width="384" height="384" > </canvas>
<canvas id ="board" width="384" height="384" > </canvas>

<br>
<img id="tileset_0" class="tilemap" src="static/tiles/Bisasam_24x24.png" />
<img id="tileset_1" class="tilemap" src="static/tiles/dwarves.png" />

</div>

</body>
<script src="js/process_msg.js"></script>
<script src="js/validate.js"></script>
<script src="js/socket.js"></script>
<script src="js/game_objects.js"></script>
<script src="js/state_m3thyl.js"></script>
<script src="js/server_api.js"></script>
<script src="js/user_input.js"></script>

<script src="js/game.js"></script>

<script src="js/tileset.js"></script>
<script src="js/board.js"></script>

<script src="js/map_editor.js"></script>

<script>

function test1() {

drawingCache.drawTile(1,1,5);

drawingCache.drawSprite(0,0,1,1);
drawingCache.drawSprite(4,4,7,1);
drawingCache.drawSprite(5,5,127,1);
}


$('#init').click(function (event) {
    event.preventDefault;
	board.init();
	drawingCache.insertTilemap("static/tiles/Bisasam_24x24.png", 0, 24, 24, 16, 16);
	drawingCache.insertTilemap("static/tiles/dwarves.png", 1, 18, 20, 16, 16);
    
    game.init();

    return false;
});

$('#start').click(function (event) {
    event.preventDefault;
    
 //   	console.timeEnd('a')
//	console.time('b')
    console.time("board_draw")
    board.start();
	console.timeEnd("board_draw");
    
    map_editor.init_panel();
    map_editor.init_panel_controls();

/* //benchmarking
var i;
var times = 1000;

	console.time("default_drawing_function")
	for(i=0; i<times; i++)	cursor_manager.draw_board()
	console.timeEnd("default_drawing_function")
	
	console.time("drawing_function_0")	
	//cursor_manager.draw_board()
	for(i=0; i<times; i++)	cursor_manager.test_draw_board_0();
	console.timeEnd("drawing_function_0")	

	console.time("drawing_function_1")	
	for(i=0; i<times; i++)	cursor_manager.test_draw_board_1();
	console.timeEnd("drawing_function_1")

	console.time("drawing_function_2")	
	for(i=0; i<times; i++)	cursor_manager.test_draw_board_2();
	console.timeEnd("drawing_function_2")
*/
			
    //test1();
  /*
    drawingCache.drawTile(1,1,0);
    drawingCache.drawTile(1,2,1);
    drawingCache.drawTile(1,3,2);
    
    drawingCache.drawTile(1,1,64);
    drawingCache.drawTile(2,1,65);
    drawingCache.drawTile(3,1,128);
    drawingCache.drawTile(4,2,1002);
    drawingCache.drawTile(5,5,666);
	drawingCache.drawTile(5,1,-1);
	drawingCache.drawTile(6,1,65);
	
	drawingCache.drawSprite(5,5,127,1);
	drawingCache.drawSprite(6,6,0,1);
	*/
	game.start();
    
    $('canvas#board').attr({'class': 'tip click', 'title': 'Game board'});
    $('.tip.click').tipTip({ activation: 'click', 
                             delay: 100,
                             fadeIn: 100,
                             fadeOut: 400,
                             edgeOffset: -250, 
                             edgeInset: 100, 
                             defaultPosition: 'top', 
                             position: 'absolute',
                            });
    
    return false;
});

$(document).ready(function () {
//alert("WTF");
console.log("Ready")
return false;
//test1();
});

// tooltip
$(function(){
    $(".tip").tipTip();
});

</script>

</html>
